<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.cafe24.eduManger.StudentMapper.StuCounselMapper">
	<select id="stuList" resultType="com.cafe24.eduManger.StudentVo.StuCounsel">
		SELECT 
			 b.ac_code AS ac_code 
			,b.member_id AS m_id 
			,member_name AS m_name 
			,member_gender AS m_gender 
			,stu_counsel_code 
		FROM stu_counsel a 
		inner JOIN member AS b 
			ON member_level = '수강생'
			GROUP BY b.member_id
	</select>
	
	<select id="stuSearch" parameterType="String" resultType="com.cafe24.eduManger.StudentVo.StuCounsel">
		SELECT 
			 b.ac_code AS ac_code 
			,b.member_id AS m_id 
			,member_name AS m_name 
			,member_gender AS m_gender 
			,stu_counsel_code 
		FROM stu_counsel AS a 
		inner JOIN member AS b 
			ON member_level = '수강생'
			WHERE ${sk} LIKE CONCAT('%',#{sv},'%')
			AND a.member_id = b.member_id
			GROUP BY a.member_id
	</select>
	
	<select id="stuCounselList" parameterType="String" resultType="com.cafe24.eduManger.StudentVo.StuCounsel">
		SELECT 
			stu_counsel_code, 
			ac_code, member_id, 
			admin_id, counsel_cate, 
			counsel_desc, 
			counsel_date
		FROM stu_counsel
			WHERE member_id = #{mId}
	</select>
</mapper>
