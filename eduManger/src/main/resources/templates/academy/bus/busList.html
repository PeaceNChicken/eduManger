<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default}">
<head>
	<meta charset="UTF-8">
</head>
	<th:block layout:fragment="customTitle">
		<title>index</title>
	</th:block>
	<th:block layout:fragment="customContents">
		
    <!-- **********************************************************************************************************************************************************
        MAIN CONTENT
        *********************************************************************************************************************************************************** -->
    <!--main content start-->
   <section id="main-content">
		<section class="wrapper">
			<div class="row">
				<div class="col-lg-12 main-chart">     			
          			<div class="content-panel">
            		    <div class="form-panel ">
		                <h2><i class="fa fa-angle-right"></i>등록된차량관리</h2>
		                <hr/>
		                <!-- 조건입력창 -->
						  	<a href="/busInsert"><button type="button" class="btn btn-theme pull-right">차량등록</button></a>			
		                <!--  조건입력END -->
		                <br/>
		                <br/>
		                <table class="table table-striped table-advance table-hover">
			                <thead>
			                  <tr>
						        <th>차량번호</th>
						        <th>차종</th>
						        <th>호차번호</th>
						        <th>승차정원</th>
						        <th>기사성함</th>
						        <th>기사번호</th>
						        <th>노선</th>
						        <th>등록자아이디</th>
						        <th>등록날짜</th>
						        <th>수정</th>
						        <th>삭제</th>	
						      </tr>
			                </thead>
			                <tbody>
			                <tr th:each="u: ${bus}">
						        <td th:text="${u.bus_number}"></td>
						        <td th:text="${u.bus_cate}"></td>
						        <td th:text="${u.bus_num}"></td>
						        <td th:text="${u.bus_limit}"></td>
						        <td th:text="${u.bus_driver}"></td>
						        <td th:text="${u.bus_driver_phone}"></td>
						        <td th:text="${u.line_select}"></td>
						        <td th:text="${u.member_id}"></td>
						        <td th:text="${u.bus_date}"></td>
						        <td>
			                      <a th:href="@{/busUpdate(bus=${u.bus_code})}"><button class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></button></a>				                      
			                   </td>
			                    <td>
			                      <button class="btn btn-danger btn-xs btnDelete" th:data-bus="${u.bus_code}"><i class="fa fa-trash-o "></i></button>
			                    </td>
			                 </tr>
			                </tbody>
				            </table>
				            <div class="modal fade" id="deleteModal">
						    <div class="modal-dialog modal-sm">
						      <div class="modal-content">
						        <div class="modal-body">
						          <h4>정말 삭제하시겠습니까?</h4>
						        </div>
						        <div class="modal-footer">
						          <button class="btn btn-danger" id="deleteBtn">YES</button>
						          <button class="btn btn-danger" data-dismiss="modal">No</button>
						        </div>
						      </div>
						    </div>
						  </div>
		        		 </div>
						</div>
						</div>
						</div>
				</section>
			</section>
			<script type="text/javascript">
			$(document).ready(function(){
				$('.btnDelete').click(function(){				
					var bus = $(this).attr('data-bus');
					$('#deleteBtn').val(bus);			
					$('#deleteModal').modal('show');
				});
				
				$('#deleteBtn').click(function(){
					var bus = $(this).val();									
					//alert(data-bus);
					location.href = '/busDelete?bus='+ bus;
				});				
			});
		</script>	
	</th:block>
</html>